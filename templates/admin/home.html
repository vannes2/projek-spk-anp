<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Dashboard Admin | SPK ANP</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Admin CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/admin/home.css') }}">

  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
</head>

<body class="page-admin">
  <div class="admin-wrapper d-flex">

    <!-- SIDEBAR -->
    <aside id="sidebar" class="bg-dark text-white">
      <div class="sidebar-header p-3 text-center border-bottom border-secondary">
        <h4 class="fw-bold mb-0">SPK ANP Admin</h4>
      </div>

      <ul class="nav flex-column p-3">

        <!-- Dashboard -->
        <li class="nav-item mb-2">
          <a href="{{ url_for('admin_home') }}"
             class="nav-link text-white {% if request.path == '/admin/home' %}active{% endif %}">
            <i class="bi bi-house-door-fill"></i> Dashboard
          </a>
        </li>

        <!-- Log Sistem -->
        <li class="nav-item mb-2">
          <a href="{{ url_for('admin_logs') }}" class="nav-link text-white">
            <i class="bi bi-file-text-fill"></i> Log Sistem
          </a>
        </li>

        <!-- Kelola Kriteria -->
        <li class="nav-item mb-2">
          <a href="{{ url_for('admin_kriteria') }}" class="nav-link text-white">
            <i class="bi bi-sliders"></i> Kelola Kriteria
          </a>
        </li>
      </ul>

      <div class="p-3 mt-auto border-top border-secondary">
        <a href="{{ url_for('logout') }}" class="btn btn-outline-light w-100">
          <i class="bi bi-box-arrow-right"></i> Logout
        </a>
      </div>
    </aside>

    <!-- PAGE BODY -->
    <main id="page-body" class="flex-grow-1 p-4">
      <div class="container-fluid">

        <!-- HEADER -->
        <h2 class="fw-bold mb-4 text-primary">üë®‚Äçüíº Dashboard Admin</h2>
        <p class="text-muted mb-4">Selamat datang, <b>{{ name }}</b>!</p>

        <!-- STATISTIK -->
        <div class="row mb-4">
          <div class="col-md-4">
            <div class="card text-center shadow-sm border-0">
              <div class="card-body">
                <h5 class="fw-bold text-secondary">Total Pengguna</h5>
                <h3 class="text-primary fw-bold">{{ users|length }}</h3>
              </div>
            </div>
          </div>

          <div class="col-md-4">
            <div class="card text-center shadow-sm border-0">
              <div class="card-body">
                <h5 class="fw-bold text-secondary">Riwayat Analisis</h5>
                <h3 class="text-success fw-bold">12</h3>
              </div>
            </div>
          </div>

          <div class="col-md-4">
            <div class="card text-center shadow-sm border-0">
              <div class="card-body">
                <h5 class="fw-bold text-secondary">Total Transaksi</h5>
                <h3 class="text-warning fw-bold">8</h3>
              </div>
            </div>
          </div>
        </div>

        <!-- DAFTAR USER -->
        <div class="card shadow-sm">
          <div class="card-header bg-primary text-white fw-bold">
            Daftar Pengguna Terdaftar
          </div>

          <div class="card-body">
            <table class="table table-striped table-bordered align-middle">
              <thead class="table-primary">
                <tr>
                  <th>No</th>
                  <th>Nama</th>
                  <th>Email</th>
                  <th>Role</th>
                </tr>
              </thead>

              <tbody>
                {% for u in users %}
                <tr>
                  <td>{{ loop.index }}</td>
                  <td>{{ u.name }}</td>
                  <td>{{ u.email }}</td>
                  <td>{{ u.role }}</td>
                </tr>
                {% else %}
                <tr>
                  <td colspan="4" class="text-center text-muted">Belum ada user terdaftar.</td>
                </tr>
                {% endfor %}
              </tbody>

            </table>
          </div>
        </div>

      </div>
    </main>

  </div>
</body>
</html>
